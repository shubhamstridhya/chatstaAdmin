"use strict";(self.webpackChunkChatsta=self.webpackChunkChatsta||[]).push([[262],{8262:(P,f,a)=>{a.r(f),a.d(f,{AuthModule:()=>F});var p=a(9808),g=a(8118),o=a(1223);let w=(()=>{class e{constructor(){this.title="Chatsta"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-auth"]],decls:6,vars:0,consts:[[1,"login-page","d-flex","justify-content-center","align-items-center",2,"background-image","url('assets/login-bg.png')"],[1,"login-wrap","d-block"],["src","assets/logo.svg",1,"logo-img","mx-auto","d-flex"],[1,"logo-title","text-center"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.TgZ(3,"h1",3),o._uU(4,"Chatsta"),o.qZA(),o._UZ(5,"router-outlet"),o.qZA()())},directives:[g.lC],styles:[".login-page[_ngcontent-%COMP%]{height:100vh;width:100vw;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:cover}.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;border-radius:17px;width:90%;max-width:410px;box-shadow:0 0 6px #00000070}.logo-img[_ngcontent-%COMP%]{height:126px;width:126px;margin-bottom:37px}h1.logo-title[_ngcontent-%COMP%]{font-size:45px;font-weight:700;color:#000;margin:0}@media (max-width: 767.98px){.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;height:100%;border-radius:0;width:100%;max-width:100%;box-shadow:none;justify-content:center;display:flex!important;flex-direction:column}}"]}),e})();var n=a(2382),u=a(6518),d=a(520),c=a(2340);let m=(()=>{class e{constructor(t,r){this.http=t,this.auth=r,this.requestHeader=new d.WM({"No-auth":"True"})}adminlogin(t){return this.http.post(c.N.api_url+"/admin/Login",t,{headers:this.requestHeader})}roleMatch(t){let r=!1;return this.auth.getRoles()===t&&(r=!0),r}loggedIn(){return!!localStorage.getItem("token")}forgot(t){return this.http.post(c.N.api_url+"/admin/userForgotPassword",t)}resetpas(t,r){return this.http.patch(c.N.api_url+"/admin/userResetPassword/"+t,r)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(d.eN),o.LFG(u.e))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),b=(()=>{class e{constructor(t,r,s,l){this.router=t,this.builder=r,this.auth=s,this.loginservice=l}ngOnInit(){console.log("2"),this.buildloginform()}buildloginform(){this.forgotForm=this.builder.group({email:new n.NI})}forgot(){console.log(this.forgotForm.value),this.loginservice.forgot(this.forgotForm.value).subscribe(t=>{console.log(t)})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(g.F0),o.Y36(n.qu),o.Y36(u.e),o.Y36(m))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-forgot-password"]],decls:12,vars:1,consts:[[1,"login-form","w-100",3,"formGroup"],[1,"login-title"],[1,"login-detail-forgot"],[1,"forgot-password-text","text-center"],[1,"form-floating"],["type","email","id","floatingInput","placeholder"," ","formControlName","email",1,"form-control"],["for","floatingInput"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"form",0)(1,"h3",1),o._uU(2,"Forgot Password"),o.qZA(),o.TgZ(3,"div",2)(4,"p",3),o._uU(5,"Enter your ragister email below to reveive verification code "),o.qZA(),o.TgZ(6,"div",4),o._UZ(7,"input",5),o.TgZ(8,"label",6),o._uU(9,"Email"),o.qZA()(),o.TgZ(10,"button",7),o.NdJ("click",function(){return r.forgot()}),o._uU(11," Send "),o.qZA()()()),2&t&&o.Q6J("formGroup",r.forgotForm)},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:10px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:35px;margin-top:0;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:80px auto 0;width:200px;padding:10px;font-weight:600}@media (max-width: 1399.98px){button.login-btn[_ngcontent-%COMP%]{margin-top:30px}}"]}),e})();function v(e,i){1&e&&(o.TgZ(0,"div"),o._uU(1,"First Name is required"),o.qZA())}function C(e,i){if(1&e&&(o.TgZ(0,"div",9),o.YNc(1,v,2,0,"div",10),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.f.firstName.errors.required)}}const h=function(e){return{"is-invalid":e}},Z=[{path:"",component:w,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class e{constructor(t,r,s,l){this.router=t,this.builder=r,this.auth=s,this.loginservice=l}ngOnInit(){this.buildloginform()}buildloginform(){this.loginForm=this.builder.group({email:new n.NI,password:new n.NI})}login(){console.log(this.loginForm.value),this.loginservice.adminlogin(this.loginForm.value).subscribe(t=>{console.log(t),this.auth.setRoles(t.user.role),this.auth.setToken(t.token),this.router.navigate("admin"===t.user.role?["/admin/dashboard"]:["/auth/login"]),window.alert("login successful")},t=>{window.alert("login failed"),console.log(t)})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(g.F0),o.Y36(n.qu),o.Y36(u.e),o.Y36(m))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:16,vars:1,consts:[[1,"login-form","w-100",3,"formGroup"],[1,"login-title"],[1,"form-floating"],["type","email","id","floatingInput","placeholder"," ","formControlName","email",1,"form-control"],["for","floatingInput"],["type","password","id","floatingInput","placeholder"," ","formControlName","password",1,"form-control"],["href","/auth/forgot"],[1,"forgot-password-text","text-center"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"form",0)(1,"h3",1),o._uU(2,"Log In"),o.qZA(),o.TgZ(3,"div",2),o._UZ(4,"input",3),o.TgZ(5,"label",4),o._uU(6,"Email"),o.qZA()(),o.TgZ(7,"div",2),o._UZ(8,"input",5),o.TgZ(9,"label",4),o._uU(10,"Password"),o.qZA()(),o.TgZ(11,"a",6)(12,"p",7),o._uU(13,"Forgot Password?"),o.qZA()(),o.TgZ(14,"button",8),o.NdJ("click",function(){return r.login()}),o._uU(15," Log In "),o.qZA()()),2&t&&o.Q6J("formGroup",r.loginForm)},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:35px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:80px;margin-top:-5px;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:0 auto;width:200px;padding:10px;font-weight:600}@media (max-width: 1399.98px){p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:30px}}"]}),e})()},{path:"forgot",component:b},{path:"Password/UserResetPassword/:id",component:(()=>{class e{constructor(t,r,s,l,T){this.router=t,this.builder=r,this.auth=s,this.activatedRoute=l,this.loginservice=T,this.submitted=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.token=t.id,console.log(this.token)}),this.buildresetform()}buildresetform(){this.resetForm=this.builder.group({password:new n.NI("",[n.kI.required,n.kI.minLength(6)]),confirmpassword:new n.NI("",[n.kI.required,n.kI.minLength(6)])})}reset(){console.log(this.token,this.resetForm.value),this.loginservice.resetpas(this.token,this.resetForm.value).subscribe(t=>{console.log(t)}),this.router.navigate(["/auth/login"])}get f(){return this.resetForm.controls}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(g.F0),o.Y36(n.qu),o.Y36(u.e),o.Y36(g.gz),o.Y36(m))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-resetpassword"]],decls:15,vars:9,consts:[[1,"login-form","w-100",3,"formGroup","ngSubmit"],[1,"login-title"],[1,"new-password-wrap","mt-5"],[1,"form-floating"],["type","password","id","floatingInput","placeholder","","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","floatingInput"],["type","password","id","floatingInput","placeholder"," ","formControlName","confirmpassword",1,"form-control",3,"ngClass"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,r){if(1&t&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return r.reset()}),o.TgZ(1,"h3",1),o._uU(2,"Forgot Password"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3),o._UZ(5,"input",4),o.YNc(6,C,2,1,"div",5),o.TgZ(7,"label",6),o._uU(8,"New Password"),o.qZA()(),o.TgZ(9,"div",3),o._UZ(10,"input",7),o.TgZ(11,"label",6),o._uU(12,"Confirm Password"),o.qZA()(),o.TgZ(13,"button",8),o._uU(14," Change Password "),o.qZA()()()),2&t){let s,l;o.Q6J("formGroup",r.resetForm),o.xp6(5),o.Q6J("ngClass",o.VKq(5,h,(null==(s=r.resetForm.get("password"))?null:s.touched)&&(null==(s=r.resetForm.get("password"))?null:s.invalid))),o.xp6(1),o.Q6J("ngIf",r.submitted&&r.f.firstName.errors),o.xp6(4),o.Q6J("ngClass",o.VKq(7,h,(null==(l=r.resetForm.get("confirmpassword"))?null:l.touched)&&(null==(l=r.resetForm.get("confirmpassword"))?null:l.invalid))),o.xp6(3),o.Q6J("disabled",r.resetForm.invalid)}},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,p.mk,p.O5],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:10px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:35px;margin-top:0;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:80px auto 0;width:200px;padding:10px;font-weight:600}@media (max-width: 1399.98px){button.login-btn[_ngcontent-%COMP%]{margin-top:30px}}"]}),e})()}]}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[g.Bz.forChild(Z)],g.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[p.ez,_,d.JF,n.UX]]}),e})()}}]);