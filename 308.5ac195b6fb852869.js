"use strict";(self.webpackChunkChatsta=self.webpackChunkChatsta||[]).push([[308],{8382:(j,f,a)=>{a.r(f),a.d(f,{AuthModule:()=>z});var g=a(9808),d=a(8118),o=a(1223);let _=(()=>{class t{constructor(){this.title="Chatsta"}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-auth"]],decls:6,vars:0,consts:[[1,"login-page","d-flex","justify-content-center","align-items-center",2,"background-image","url('assets/login-bg.png')"],[1,"login-wrap","d-block"],["src","assets/logo.svg",1,"logo-img","mx-auto","d-flex"],[1,"logo-title","text-center"]],template:function(n,e){1&n&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.TgZ(3,"h1",3),o._uU(4,"Chatsta"),o.qZA(),o._UZ(5,"router-outlet"),o.qZA()())},directives:[d.lC],styles:[".login-page[_ngcontent-%COMP%]{height:100vh;width:100vw;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:cover}.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;border-radius:17px;width:90%;max-width:410px;box-shadow:0 0 6px #00000070}.logo-img[_ngcontent-%COMP%]{height:126px;width:126px;margin-bottom:37px}h1.logo-title[_ngcontent-%COMP%]{font-size:45px;font-weight:700;color:#000;margin:0}@media (max-width: 767.98px){.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;height:100%;border-radius:0;width:100%;max-width:100%;box-shadow:none;justify-content:center;display:flex!important;flex-direction:column}}"]}),t})();var r=a(2382),u=a(6518),p=a(520);const m_api_url="http://167.172.49.47:3006/api/v1";let c=(()=>{class t{constructor(n,e){this.http=n,this.auth=e,this.requestHeader=new p.WM({"No-auth":"True"})}adminlogin(n){return this.http.post(m_api_url+"/admin/login",n,{headers:this.requestHeader})}roleMatch(n){let e=!1;return this.auth.getRoles()===n&&(e=!0),e}loggedIn(){return!!localStorage.getItem("token")}forgot(n){return this.http.post(m_api_url+"/admin/userForgotPassword",n)}resetpas(n,e){return this.http.patch(m_api_url+"/admin/userResetPassword/"+n,e)}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(p.eN),o.LFG(u.e))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function w(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Email is required"),o.qZA())}function x(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Invalid Email"),o.qZA())}function b(t,i){if(1&t&&(o.TgZ(0,"div",11),o.YNc(1,w,2,0,"div",12),o.YNc(2,x,2,0,"div",12),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.email)}}function Z(t,i){1&t&&(o.TgZ(0,"div",13),o._uU(1,"Email sent successfully!"),o.qZA())}const C=function(t){return{"is-invalid":t}};let T=(()=>{class t{constructor(n,e,s,l){this.router=n,this.builder=e,this.auth=s,this.loginservice=l,this.sent=!1}ngOnInit(){console.log("2"),this.buildloginform()}get f(){return this.forgotForm.controls}buildloginform(){this.forgotForm=this.builder.group({email:new r.NI("",[r.kI.required,r.kI.email])})}forgot(){this.loginservice.forgot(this.forgotForm.value).subscribe(n=>{}),this.sent=!0}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(d.F0),o.Y36(r.qu),o.Y36(u.e),o.Y36(c))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-forgot-password"]],decls:15,vars:7,consts:[[1,"login-form","w-100",3,"formGroup","ngSubmit"],[1,"login-title"],[1,"login-detail-forgot"],[1,"forgot-password-text","text-center"],[1,"form-group"],[1,"form-floating"],["type","email","id","floatingInput","placeholder"," ","formControlName","email",1,"form-control",3,"ngClass"],["for","floatingInput"],["class","validation-error",4,"ngIf"],["class","success-msg",4,"ngIf"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"disabled"],[1,"validation-error"],[4,"ngIf"],[1,"success-msg"]],template:function(n,e){if(1&n&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return e.forgot()}),o.TgZ(1,"h3",1),o._uU(2,"Forgot Password"),o.qZA(),o.TgZ(3,"div",2)(4,"p",3),o._uU(5,"Enter your ragister email below to reveive verification code "),o.qZA(),o.TgZ(6,"div",4)(7,"div",5),o._UZ(8,"input",6),o.TgZ(9,"label",7),o._uU(10,"Email"),o.qZA()(),o.YNc(11,b,3,2,"div",8),o.qZA(),o.YNc(12,Z,2,0,"div",9),o.TgZ(13,"button",10),o._uU(14," Send "),o.qZA()()()),2&n){let s;o.Q6J("formGroup",e.forgotForm),o.xp6(8),o.Q6J("ngClass",o.VKq(5,C,(null==(s=e.forgotForm.get("email"))?null:s.touched)&&(null==(s=e.forgotForm.get("email"))?null:s.invalid))),o.xp6(3),o.Q6J("ngIf",e.f.email.touched&&!e.f.email.valid),o.xp6(1),o.Q6J("ngIf",e.sent),o.xp6(1),o.Q6J("disabled",e.forgotForm.invalid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.mk,g.O5],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:10px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:35px;margin-top:0;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:80px auto 0;min-width:200px;padding:10px 30px;font-weight:600}@media (max-width: 1399.98px){button.login-btn[_ngcontent-%COMP%]{margin-top:30px}}"]}),t})();function F(t,i){1&t&&(o.TgZ(0,"div",11),o._uU(1,"Enter your Email"),o.qZA())}function I(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Email is required"),o.qZA())}function q(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Invalid Email"),o.qZA())}function A(t,i){if(1&t&&(o.TgZ(0,"div",11),o.YNc(1,I,2,0,"div",12),o.YNc(2,q,2,0,"div",12),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.email)}}function J(t,i){1&t&&(o.TgZ(0,"div",11),o._uU(1,"Enter your Password"),o.qZA())}function P(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password is required"),o.qZA())}function U(t,i){if(1&t&&(o.TgZ(0,"div",11),o.YNc(1,P,2,0,"div",12),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.required)}}const h=function(t){return{"is-invalid":t}};function Y(t,i){return n=>{const s=n.controls[i];s.errors&&!s.errors.confirmedValidator||s.setErrors(n.controls[t].value!==s.value?{confirmedValidator:!0}:null)}}function N(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Minimum length is 6 character"),o.qZA())}function M(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password is required."),o.qZA())}function k(t,i){if(1&t&&(o.TgZ(0,"div",10),o.YNc(1,N,2,0,"div",11),o.YNc(2,M,2,0,"div",11),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",null==n.f.password.errors?null:n.f.password.errors.minlength),o.xp6(1),o.Q6J("ngIf",n.f.password.errors.required)}}function Q(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Confirm password is required."),o.qZA())}function L(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password and Confirm Password must be match."),o.qZA())}function O(t,i){if(1&t&&(o.TgZ(0,"div",10),o.YNc(1,Q,2,0,"div",11),o.YNc(2,L,2,0,"div",11),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.f.confirmpassword.errors.required),o.xp6(1),o.Q6J("ngIf",n.f.confirmpassword.errors.confirmedValidator)}}const v=function(t){return{"is-invalid":t}},R=[{path:"",component:_,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class t{constructor(n,e,s,l){this.router=n,this.builder=e,this.auth=s,this.loginservice=l,this.Faillogin=!1,this.loginpassed=!1}ngOnInit(){this.buildloginform()}get f(){return this.loginForm.controls}buildloginform(){this.loginForm=this.builder.group({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required])})}login(){this.loginservice.adminlogin(this.loginForm.value).subscribe(n=>{this.auth.setRoles(n.user.role),this.auth.setToken(n.token),this.router.navigate("admin"===n.user.role?["/admin/dashboard"]:["/auth/login"]),this.loginpassed=!0},n=>{this.Faillogin=!0})}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(d.F0),o.Y36(r.qu),o.Y36(u.e),o.Y36(c))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:22,vars:11,consts:[[1,"login-form","w-100",3,"formGroup","ngSubmit"],[1,"login-title"],[1,"form-group"],[1,"form-floating"],["type","email","id","floatingInput","placeholder"," ","formControlName","email",1,"form-control",3,"ngClass"],["for","floatingInput"],["class","validation-error",4,"ngIf"],["type","password","id","floatingInput","placeholder"," ","formControlName","password",1,"form-control",3,"ngClass"],["routerLink","/auth/forgot"],[1,"forgot-password-text","text-center"],[1,"login-btn","d-flex","mx-auto","justify-content-center"],[1,"validation-error"],[4,"ngIf"]],template:function(n,e){if(1&n&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return e.login()}),o.TgZ(1,"h3",1),o._uU(2,"Log In"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3),o._UZ(5,"input",4),o.TgZ(6,"label",5),o._uU(7,"Email"),o.qZA()(),o.YNc(8,F,2,0,"div",6),o.YNc(9,A,3,2,"div",6),o.qZA(),o.TgZ(10,"div",2)(11,"div",3),o._UZ(12,"input",7),o.TgZ(13,"label",5),o._uU(14,"Password"),o.qZA()(),o.YNc(15,J,2,0,"div",6),o.YNc(16,U,2,1,"div",6),o.qZA(),o.TgZ(17,"a",8)(18,"p",9),o._uU(19,"Forgot Password?"),o.qZA()(),o.TgZ(20,"button",10),o._uU(21," Log In "),o.qZA()()),2&n){let s,l;o.Q6J("formGroup",e.loginForm),o.xp6(5),o.Q6J("ngClass",o.VKq(7,h,(null==(s=e.loginForm.get("email"))?null:s.touched)&&(null==(s=e.loginForm.get("email"))?null:s.invalid))),o.xp6(3),o.Q6J("ngIf",e.Faillogin&&!e.f.email.touched),o.xp6(1),o.Q6J("ngIf",e.f.email.touched&&!e.f.email.valid),o.xp6(3),o.Q6J("ngClass",o.VKq(9,h,(null==(l=e.loginForm.get("password"))?null:l.touched)&&(null==(l=e.loginForm.get("password"))?null:l.invalid))),o.xp6(3),o.Q6J("ngIf",e.Faillogin&&!e.f.password.touched),o.xp6(1),o.Q6J("ngIf",e.f.password.touched&&!e.f.password.valid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.mk,g.O5,d.yS],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:35px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:80px;margin-top:-5px;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:0 auto;min-width:200px;padding:10px 30px;font-weight:600}@media (max-width: 1399.98px){p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:30px}}"]}),t})()},{path:"forgot",component:T},{path:"Password/UserResetPassword/:id",component:(()=>{class t{constructor(n,e,s,l,E){this.router=n,this.builder=e,this.auth=s,this.activatedRoute=l,this.loginservice=E,this.submitted=!1}ngOnInit(){this.activatedRoute.params.subscribe(n=>{this.token=n.id,console.log(this.token)}),this.buildresetform()}get f(){return this.resetForm.controls}buildresetform(){this.resetForm=this.builder.group({password:new r.NI("",[r.kI.required,r.kI.minLength(6)]),confirmpassword:new r.NI("",[r.kI.required,r.kI.minLength(6)])},{validator:Y("password","confirmpassword")})}reset(){this.loginservice.resetpas(this.token,this.resetForm.value).subscribe(n=>{}),this.router.navigate(["/auth/login"])}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(d.F0),o.Y36(r.qu),o.Y36(u.e),o.Y36(d.gz),o.Y36(c))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-resetpassword"]],decls:18,vars:10,consts:[[1,"login-form","w-100",3,"formGroup","ngSubmit"],[1,"login-title"],[1,"new-password-wrap","mt-5"],[1,"form-group"],[1,"form-floating"],["type","password","id","floatingInput","placeholder"," ","formControlName","password",1,"form-control",3,"ngClass"],["for","floatingInput"],["class","validation-error",4,"ngIf"],["type","password","id","floatingInput","placeholder"," ","formControlName","confirmpassword",1,"form-control",3,"ngClass"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"disabled"],[1,"validation-error"],[4,"ngIf"]],template:function(n,e){if(1&n&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return e.reset()}),o.TgZ(1,"h3",1),o._uU(2,"Forgot Password"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"div",4),o._UZ(6,"input",5),o.TgZ(7,"label",6),o._uU(8,"New Password"),o.qZA()(),o.YNc(9,k,3,2,"div",7),o.qZA(),o.TgZ(10,"div",3)(11,"div",4),o._UZ(12,"input",8),o.TgZ(13,"label",6),o._uU(14,"Confirm Password"),o.qZA()(),o.YNc(15,O,3,2,"div",7),o.qZA(),o.TgZ(16,"button",9),o._uU(17," Change Password "),o.qZA()()()),2&n){let s,l;o.Q6J("formGroup",e.resetForm),o.xp6(6),o.Q6J("ngClass",o.VKq(6,v,(null==(s=e.resetForm.get("password"))?null:s.touched)&&(null==(s=e.resetForm.get("password"))?null:s.invalid))),o.xp6(3),o.Q6J("ngIf",e.f.password.touched&&e.f.password.invalid),o.xp6(3),o.Q6J("ngClass",o.VKq(8,v,(null==(l=e.resetForm.get("confirmpassword"))?null:l.touched)&&(null==(l=e.resetForm.get("confirmpassword"))?null:l.invalid))),o.xp6(3),o.Q6J("ngIf",e.f.confirmpassword.touched&&e.f.confirmpassword.invalid),o.xp6(1),o.Q6J("disabled",e.resetForm.invalid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.mk,g.O5],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:10px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:35px;margin-top:0;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:80px auto 0;min-width:200px;padding:10px 30px;font-weight:600}@media (max-width: 1399.98px){button.login-btn[_ngcontent-%COMP%]{margin-top:30px}}"]}),t})()}]}];let S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[d.Bz.forChild(R)],d.Bz]}),t})(),z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[g.ez,S,p.JF,r.UX]]}),t})()}}]);