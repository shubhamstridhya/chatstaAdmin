"use strict";(self.webpackChunkChatsta=self.webpackChunkChatsta||[]).push([[984],{984:(j,f,l)=>{l.r(f),l.d(f,{AuthModule:()=>z});var g=l(9808),d=l(5358),o=l(1223);let w=(()=>{class t{constructor(){this.title="Chatsta"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-auth"]],decls:6,vars:0,consts:[[1,"login-page","d-flex","justify-content-center","align-items-center",2,"background-image","url('assets/login-bg.png')"],[1,"login-wrap","d-block"],["src","assets/logo.svg",1,"logo-img","mx-auto","d-flex"],[1,"logo-title","text-center"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.TgZ(3,"h1",3),o._uU(4,"Chatsta"),o.qZA(),o._UZ(5,"router-outlet"),o.qZA()())},directives:[d.lC],styles:[".login-page[_ngcontent-%COMP%]{height:100vh;width:100vw;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:cover}.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;border-radius:17px;width:90%;max-width:410px;box-shadow:0 0 6px #00000070}.logo-img[_ngcontent-%COMP%]{height:126px;width:126px;margin-bottom:37px}h1.logo-title[_ngcontent-%COMP%]{font-size:45px;font-weight:700;color:#000;margin:0}@media (max-width: 767.98px){.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;height:100%;border-radius:0;width:100%;max-width:100%;box-shadow:none;justify-content:center;display:flex!important;flex-direction:column}}"]}),t})();var r=l(2382),u=l(6518),p=l(520),m=l(9019);let c=(()=>{class t{constructor(e,n){this.http=e,this.auth=n,this.requestHeader=new p.WM({"No-auth":"True"})}adminlogin(e){return this.http.post(m.N.api_url+"/admin/login",e,{headers:this.requestHeader})}roleMatch(e){let n=!1;return this.auth.getRoles()===e&&(n=!0),n}loggedIn(){return!!localStorage.getItem("token")}forgot(e){return this.http.post(m.N.api_url+"/admin/userForgotPassword",e)}resetpas(e,n){return this.http.patch(m.N.api_url+"/admin/userResetPassword/"+e,n)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(p.eN),o.LFG(u.e))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function _(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Email is required"),o.qZA())}function x(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Invalid Email"),o.qZA())}function b(t,i){if(1&t&&(o.TgZ(0,"div",11),o.YNc(1,_,2,0,"div",12),o.YNc(2,x,2,0,"div",12),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.f.email.errors?null:e.f.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==e.f.email.errors?null:e.f.email.errors.email)}}function Z(t,i){1&t&&(o.TgZ(0,"div",13),o._uU(1,"Email sent successfully!"),o.qZA())}const C=function(t){return{"is-invalid":t}};let T=(()=>{class t{constructor(e,n,s,a){this.router=e,this.builder=n,this.auth=s,this.loginservice=a,this.sent=!1}ngOnInit(){console.log("2"),this.buildloginform()}get f(){return this.forgotForm.controls}buildloginform(){this.forgotForm=this.builder.group({email:new r.NI("",[r.kI.required,r.kI.email])})}forgot(){this.loginservice.forgot(this.forgotForm.value).subscribe(e=>{}),this.sent=!0}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.F0),o.Y36(r.qu),o.Y36(u.e),o.Y36(c))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-forgot-password"]],decls:15,vars:7,consts:[[1,"login-form","w-100",3,"formGroup","ngSubmit"],[1,"login-title"],[1,"login-detail-forgot"],[1,"forgot-password-text","text-center"],[1,"form-group"],[1,"form-floating"],["type","email","id","email","placeholder"," ","formControlName","email",1,"form-control",3,"ngClass"],["for","email"],["class","validation-error",4,"ngIf"],["class","success-msg",4,"ngIf"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"disabled"],[1,"validation-error"],[4,"ngIf"],[1,"success-msg"]],template:function(e,n){if(1&e&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return n.forgot()}),o.TgZ(1,"h3",1),o._uU(2,"Forgot Password"),o.qZA(),o.TgZ(3,"div",2)(4,"p",3),o._uU(5,"Enter your register email below to receive verification code "),o.qZA(),o.TgZ(6,"div",4)(7,"div",5),o._UZ(8,"input",6),o.TgZ(9,"label",7),o._uU(10,"Email"),o.qZA()(),o.YNc(11,b,3,2,"div",8),o.qZA(),o.YNc(12,Z,2,0,"div",9),o.TgZ(13,"button",10),o._uU(14," Send "),o.qZA()()()),2&e){let s;o.Q6J("formGroup",n.forgotForm),o.xp6(8),o.Q6J("ngClass",o.VKq(5,C,(null==(s=n.forgotForm.get("email"))?null:s.touched)&&(null==(s=n.forgotForm.get("email"))?null:s.invalid))),o.xp6(3),o.Q6J("ngIf",n.f.email.touched&&!n.f.email.valid),o.xp6(1),o.Q6J("ngIf",n.sent),o.xp6(1),o.Q6J("disabled",n.forgotForm.invalid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.mk,g.O5],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:10px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:35px;margin-top:0;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:80px auto 0;min-width:200px;padding:10px 30px;font-weight:600}@media (max-width: 1399.98px){button.login-btn[_ngcontent-%COMP%]{margin-top:30px}}"]}),t})();function F(t,i){1&t&&(o.TgZ(0,"div",12),o._uU(1,"Enter your Email"),o.qZA())}function q(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Email is required"),o.qZA())}function A(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Invalid Email"),o.qZA())}function I(t,i){if(1&t&&(o.TgZ(0,"div",12),o.YNc(1,q,2,0,"div",13),o.YNc(2,A,2,0,"div",13),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.f.email.errors?null:e.f.email.errors.required),o.xp6(1),o.Q6J("ngIf",null==e.f.email.errors?null:e.f.email.errors.email)}}function J(t,i){1&t&&(o.TgZ(0,"div",12),o._uU(1,"Enter your Password"),o.qZA())}function P(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password is required"),o.qZA())}function N(t,i){if(1&t&&(o.TgZ(0,"div",12),o.YNc(1,P,2,0,"div",13),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.f.password.errors?null:e.f.password.errors.required)}}const h=function(t){return{"is-invalid":t}};function y(t,i){return e=>{const s=e.controls[i];s.errors&&!s.errors.confirmedValidator||s.setErrors(e.controls[t].value!==s.value?{confirmedValidator:!0}:null)}}function Y(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Minimum length is 6 character"),o.qZA())}function M(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password is required."),o.qZA())}function Q(t,i){if(1&t&&(o.TgZ(0,"div",11),o.YNc(1,Y,2,0,"div",12),o.YNc(2,M,2,0,"div",12),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",null==e.f.password.errors?null:e.f.password.errors.minlength),o.xp6(1),o.Q6J("ngIf",e.f.password.errors.required)}}function k(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Confirm password is required."),o.qZA())}function L(t,i){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password and Confirm Password must be match."),o.qZA())}function O(t,i){if(1&t&&(o.TgZ(0,"div",11),o.YNc(1,k,2,0,"div",12),o.YNc(2,L,2,0,"div",12),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.f.confirmpassword.errors.required),o.xp6(1),o.Q6J("ngIf",e.f.confirmpassword.errors.confirmedValidator)}}const v=function(t){return{"is-invalid":t}},R=[{path:"",component:w,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class t{constructor(e,n,s,a){this.router=e,this.builder=n,this.auth=s,this.loginservice=a,this.Faillogin=!1,this.loginpassed=!1}ngOnInit(){this.buildloginform()}get f(){return this.loginForm.controls}buildloginform(){this.loginForm=this.builder.group({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required])})}login(){this.loginservice.adminlogin(this.loginForm.value).subscribe(e=>{console.log(e),this.auth.setRoles(e.data.role),this.auth.setToken(e.token),this.router.navigate("admin"===e.data.role?["/admin/dashboard"]:["/auth/login"]),this.loginpassed=!0},e=>{this.Faillogin=!0})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.F0),o.Y36(r.qu),o.Y36(u.e),o.Y36(c))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:22,vars:11,consts:[[1,"login-form","w-100",3,"formGroup","ngSubmit"],[1,"login-title"],[1,"form-group"],[1,"form-floating"],["type","email","id","email","placeholder"," ","formControlName","email",1,"form-control",3,"ngClass"],["for","email"],["class","validation-error",4,"ngIf"],["type","password","id","password","placeholder"," ","formControlName","password",1,"form-control",3,"ngClass"],["for","password"],["routerLink","/auth/forgot"],[1,"forgot-password-text","text-center"],[1,"login-btn","d-flex","mx-auto","justify-content-center"],[1,"validation-error"],[4,"ngIf"]],template:function(e,n){if(1&e&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return n.login()}),o.TgZ(1,"h3",1),o._uU(2,"Log In"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3),o._UZ(5,"input",4),o.TgZ(6,"label",5),o._uU(7,"Email"),o.qZA()(),o.YNc(8,F,2,0,"div",6),o.YNc(9,I,3,2,"div",6),o.qZA(),o.TgZ(10,"div",2)(11,"div",3),o._UZ(12,"input",7),o.TgZ(13,"label",8),o._uU(14,"Password"),o.qZA()(),o.YNc(15,J,2,0,"div",6),o.YNc(16,N,2,1,"div",6),o.qZA(),o.TgZ(17,"a",9)(18,"p",10),o._uU(19,"Forgot Password?"),o.qZA()(),o.TgZ(20,"button",11),o._uU(21," Log In "),o.qZA()()),2&e){let s,a;o.Q6J("formGroup",n.loginForm),o.xp6(5),o.Q6J("ngClass",o.VKq(7,h,(null==(s=n.loginForm.get("email"))?null:s.touched)&&(null==(s=n.loginForm.get("email"))?null:s.invalid))),o.xp6(3),o.Q6J("ngIf",n.Faillogin&&!n.f.email.touched),o.xp6(1),o.Q6J("ngIf",n.f.email.touched&&!n.f.email.valid),o.xp6(3),o.Q6J("ngClass",o.VKq(9,h,(null==(a=n.loginForm.get("password"))?null:a.touched)&&(null==(a=n.loginForm.get("password"))?null:a.invalid))),o.xp6(3),o.Q6J("ngIf",n.Faillogin&&!n.f.password.touched),o.xp6(1),o.Q6J("ngIf",n.f.password.touched&&!n.f.password.valid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.mk,g.O5,d.yS],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:35px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:80px;margin-top:-5px;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:0 auto;min-width:200px;padding:10px 30px;font-weight:600}@media (max-width: 1399.98px){p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:30px}}"]}),t})()},{path:"forgot",component:T},{path:"password/UserResetPassword/:id",component:(()=>{class t{constructor(e,n,s,a,E){this.router=e,this.builder=n,this.auth=s,this.activatedRoute=a,this.loginservice=E,this.submitted=!1}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.token=e.id,console.log(this.token)}),this.buildresetform()}get f(){return this.resetForm.controls}buildresetform(){this.resetForm=this.builder.group({password:new r.NI("",[r.kI.required,r.kI.minLength(6)]),confirmpassword:new r.NI("",[r.kI.required,r.kI.minLength(6)])},{validator:y("password","confirmpassword")})}reset(){this.loginservice.resetpas(this.token,this.resetForm.value).subscribe(e=>{}),this.router.navigate(["/auth/login"])}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.F0),o.Y36(r.qu),o.Y36(u.e),o.Y36(d.gz),o.Y36(c))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-resetpassword"]],decls:18,vars:10,consts:[[1,"login-form","w-100",3,"formGroup","ngSubmit"],[1,"login-title"],[1,"new-password-wrap","mt-5"],[1,"form-group"],[1,"form-floating"],["type","password","id","password","placeholder"," ","formControlName","password",1,"form-control",3,"ngClass"],["for","password"],["class","validation-error",4,"ngIf"],["type","password","id","confirmpassword","placeholder"," ","formControlName","confirmpassword",1,"form-control",3,"ngClass"],["for","confirmpassword"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"disabled"],[1,"validation-error"],[4,"ngIf"]],template:function(e,n){if(1&e&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return n.reset()}),o.TgZ(1,"h3",1),o._uU(2,"Forgot Password"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"div",4),o._UZ(6,"input",5),o.TgZ(7,"label",6),o._uU(8,"New Password"),o.qZA()(),o.YNc(9,Q,3,2,"div",7),o.qZA(),o.TgZ(10,"div",3)(11,"div",4),o._UZ(12,"input",8),o.TgZ(13,"label",9),o._uU(14,"Confirm Password"),o.qZA()(),o.YNc(15,O,3,2,"div",7),o.qZA(),o.TgZ(16,"button",10),o._uU(17," Change Password "),o.qZA()()()),2&e){let s,a;o.Q6J("formGroup",n.resetForm),o.xp6(6),o.Q6J("ngClass",o.VKq(6,v,(null==(s=n.resetForm.get("password"))?null:s.touched)&&(null==(s=n.resetForm.get("password"))?null:s.invalid))),o.xp6(3),o.Q6J("ngIf",n.f.password.touched&&n.f.password.invalid),o.xp6(3),o.Q6J("ngClass",o.VKq(8,v,(null==(a=n.resetForm.get("confirmpassword"))?null:a.touched)&&(null==(a=n.resetForm.get("confirmpassword"))?null:a.invalid))),o.xp6(3),o.Q6J("ngIf",n.f.confirmpassword.touched&&n.f.confirmpassword.invalid),o.xp6(1),o.Q6J("disabled",n.resetForm.invalid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.mk,g.O5],styles:["h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px;text-align:center;margin-bottom:10px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:35px;margin-top:0;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:80px auto 0;min-width:200px;padding:10px 30px;font-weight:600}@media (max-width: 1399.98px){button.login-btn[_ngcontent-%COMP%]{margin-top:30px}}"]}),t})()}]}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[d.Bz.forChild(R)],d.Bz]}),t})(),z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[g.ez,S,p.JF,r.UX]]}),t})()}}]);