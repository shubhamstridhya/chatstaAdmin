"use strict";(self.webpackChunkChatsta=self.webpackChunkChatsta||[]).push([[93],{2093:(x,d,s)=>{s.r(d),s.d(d,{AuthModule:()=>v});var m=s(9808),a=s(8118),r=s(2382),o=s(1223),g=s(6518),u=s(520),p=s(2340);let h=(()=>{class n{constructor(t,e){this.http=t,this.auth=e,this.requestHeader=new u.WM({"No-auth":"True"})}adminlogin(t){return this.http.post(p.N.api_url+"/admin/login",t,{headers:this.requestHeader})}roleMatch(t){let e=!1;return this.auth.getRoles()===t&&(e=!0),e}loggedIn(){return!!localStorage.getItem("token")}forgot(t){return this.http.post(p.N.api_url+"/admin/userForgotPassword",t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(u.eN),o.LFG(g.e))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,e,l,c){this.router=t,this.builder=e,this.auth=l,this.loginservice=c}ngOnInit(){this.buildloginform()}buildloginform(){this.loginForm=this.builder.group({email:new r.NI,password:new r.NI})}login(){console.log(this.loginForm.value),this.loginservice.adminlogin(this.loginForm.value).subscribe(t=>{console.log(t),this.auth.setRoles(t.user.role),this.auth.setToken(t.accessToken),this.router.navigate("admin"===t.user.role?["/admin/dashboard"]:["/auth/login"]),window.alert("login successful")},t=>{window.alert("login failed"),console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(a.F0),o.Y36(r.qu),o.Y36(g.e),o.Y36(h))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:21,vars:1,consts:[[1,"login-page","d-flex","justify-content-center","align-items-center",2,"background-image","url('assets/login-bg.png')"],[1,"login-wrap","d-flex","align-items-center","flex-column"],["src","assets/logo.svg",1,"logo-img"],[1,"logo-title"],[1,"login-title"],[1,"login-form","w-100",3,"formGroup"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com","formControlName","email",1,"form-control"],["for","floatingInput"],["type","password","id","floatingInput","placeholder","name@example.com","formControlName","password",1,"form-control"],["href",""],[1,"forgot-password-text","text-center"],[1,"login-btn","d-flex","mx-auto","justify-content-center",3,"click"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.TgZ(3,"h1",3),o._uU(4,"Chatsta"),o.qZA(),o.TgZ(5,"h3",4),o._uU(6,"Log In"),o.qZA(),o.TgZ(7,"form",5)(8,"div",6),o._UZ(9,"input",7),o.TgZ(10,"label",8),o._uU(11,"Email"),o.qZA()(),o.TgZ(12,"div",6),o._UZ(13,"input",9),o.TgZ(14,"label",8),o._uU(15,"Password"),o.qZA()(),o.TgZ(16,"a",10)(17,"p",11),o._uU(18,"Forgot Password?"),o.qZA()(),o.TgZ(19,"button",12),o.NdJ("click",function(){return e.login()}),o._uU(20," Log In "),o.qZA()()()()),2&t&&(o.xp6(7),o.Q6J("formGroup",e.loginForm))},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u],styles:[".login-page[_ngcontent-%COMP%]{height:100vh;width:100vw;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:cover}.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;border-radius:17px;width:90%;max-width:410px;box-shadow:0 0 6px #00000070}.logo-img[_ngcontent-%COMP%]{height:126px;width:126px;margin-bottom:37px}h1.logo-title[_ngcontent-%COMP%]{font-size:45px;font-weight:700;color:#000}h3.login-title[_ngcontent-%COMP%]{font-size:35px;font-weight:600;color:#000;margin-top:5px}form.login-form[_ngcontent-%COMP%]{margin-top:35px}p.forgot-password-text[_ngcontent-%COMP%]{margin-bottom:80px;margin-top:-5px;color:#8a97c1;font-size:15px}button.login-btn[_ngcontent-%COMP%]{font-size:18px;color:#000;background-color:#f9ec0f;border-radius:100px;box-shadow:none;border:none;margin:0 auto;width:200px;padding:10px;font-weight:600}@media (max-width: 767.98px){.login-wrap[_ngcontent-%COMP%]{background:#fff;padding:35px;height:100%;border-radius:0;width:100%;max-width:100%;box-shadow:none;justify-content:center}}"]}),n})()},{path:"forgot",component:(()=>{class n{constructor(t,e,l,c){this.router=t,this.builder=e,this.auth=l,this.loginservice=c}ngOnInit(){this.buildloginform()}buildloginform(){this.Adminaccount=this.builder.group({email:new r.NI})}sendmail(){console.log(this.Adminaccount.value),this.loginservice.forgot(this.Adminaccount.value).subscribe(t=>{console.log(t)}),this.router.navigate(["/auth/login"])}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(a.F0),o.Y36(r.qu),o.Y36(g.e),o.Y36(h))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-forgot-password"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),n})()}];let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[a.Bz.forChild(f)],a.Bz]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[m.ez,w,u.JF,r.UX]]}),n})()}}]);